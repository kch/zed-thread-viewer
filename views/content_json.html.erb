<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title><%= CGI.escapeHTML(title) %> - JSON</title>
  <link rel="stylesheet" href="<%= asset_with_hash('shared.css') %>">
  <style>
    pre { white-space: pre-wrap; word-wrap: break-word; line-height: 1.3; }
    .json-key { color: #5CCFE6; font-weight: bold; }
    .json-string { color: #D5FF80; }
    .json-string-block {
      color: #CCCAC2;
      display: block;
      background: #1C212B;
      padding: 12px;
      margin: 6px 0 6px 0;
      border: 1px solid #1A1F29;
      border-left: 4px solid #F28779;
      border-radius: 6px;
      white-space: pre-wrap;
      font-size: 9px;
      line-height: 1.4;
      position: relative;
    }
    .expandable-block {
      cursor: pointer;
    }
    .expandable-block:hover {
      border-color: #FFCC66;
    }
    .block-preview {
      position: relative;
    }
    .fade-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: linear-gradient(transparent, #1C212B);
      pointer-events: none;
    }
    .json-number { color: #DFBFFF; }
    .json-boolean { color: #FFAD66; }
    .expand-btn {
      background: #1F2430;
      border: 1px solid #242936;
      color: #FFCC66;
      padding: 2px 6px;
      font-size: 7px;
      border-radius: 3px;
      cursor: pointer;
      position: absolute;
      bottom: 4px;
      left: 6px;
      z-index: 10;
    }
    .expand-btn:hover { background: #242936; }
  </style>
  <script>
    function toggleBlock(blockId) {
      const preview = document.getElementById(blockId + '_preview');
      const full = document.getElementById(blockId + '_full');
      const btn = document.getElementById(blockId + '_btn');

      const isExpanded = full.style.display === 'block';

      if (isExpanded) {
        // Collapse: show preview, hide full
        preview.style.display = 'block';
        full.style.display = 'none';
        btn.textContent = 'show more';
      } else {
        // Expand: hide preview, show full
        preview.style.display = 'none';
        full.style.display = 'block';
        btn.textContent = 'collapse';
      }
    }
  </script>
</head>
<body>
  <%= render("_header.html", locals: { title: title, type: type, toggle_url: toggle_url, toggle_text: toggle_text }) %>
  <pre><%= highlighted_json %></pre>
</body>
</html>
